# i2c

## 1. i2c总线通信协议

### 1.1 起始信号与停止信号

起始信号
- scl时钟线为高电平
- sda数据线为下降沿

停止信号
- scl时钟线为高电平
- sda数据线为上升沿

### 1.2 写数据帧

1. 发送起始位
2. 发送设备地址（7位）
    1. 首先发送7位设备地址
    2. 然后是写数据的标志（值为0）
    3. 从机发送应答信号 0
3. 发送寄存器地址（8位）
    1. 发送8位的寄存器地址
    2. 从机返回应答信号
4. 写入数据
    1. 发送8位数据
    2. 从机再次进行应答
5. 发送停止位

### 1.3 读数据帧

1. 发送起始位
2. 发送设备地址（7位）
    1. 首先发送7位设备地址
    2. 然后发送写数据的标志
    3. 从机发送低电平的应答信号
3. 发送要写的寄存器地址
    1. 发送8位的寄存器地址
    2. 从机返回应答信号
4. 主机发送起始位
5. 发送设备地址（7位）
    1. 首先发送7位设备地址
    2. 设备地址后面是读数据标志
6. 接收数据
    1. 接受8位的数据
    2. 主机发送应答信号 1
注: 在主句接收完数据后，可以选择直接发送停止位而不先发送应答信号